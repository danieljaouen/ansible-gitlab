# file: defaults/main.yml

---
gitlab:
  common:
    directories:
      - /home/git/gitlab/tmp/pids
      - /home/git/gitlab/tmp/sockets
      - /home/git/gitlab/public/uploads
      - /home/git/repositories/root

    apt_repositories:
      - ppa:git-core/ppa

    apt_packages:
      - build-essential
      - checkinstall
      - curl
      - gettext
      - git
      - git-core
      - libcurl4-openssl-dev
      - libexpat1-dev
      - libffi-dev
      - libgdbm-dev
      - libicu-dev
      - libmysqlclient-dev
      - libncurses5-dev
      - libreadline-dev
      - libssl-dev
      - libxml2-dev
      - libxslt1-dev
      - libyaml-dev
      - logrotate
      - make
      - mysql-client
      - mysql-server
      - nginx
      - openssh-server
      - postfix
      - python-docutils
      - python-software-properties
      - redis-server
      - rsync
      - tmux
      - unattended-upgrades
      - zlib1g-dev

  repos:
    git:
      - name: gitlab
        repo: https://github.com/gitlabhq/gitlabhq.git
        dest: /home/git/gitlab
        version: 6-5-stable
      - name: gitlab-shell
        repo: https://github.com/gitlabhq/gitlab-shell.git
        dest: /home/git/gitlab-shell
        version: v1.8.0

  users:
    users:
      - name: git
        password_hash: $6$kkaegia6LEq1FlFx$MUrbk/JUHV1Ht2AGE2oKEfScjKBwM0fR84jP6i6NWbNnM8qTQqbswBDNZ4SU37YeoujhasDAJE/2TY1xZJJIL/
        shell: /bin/bash
